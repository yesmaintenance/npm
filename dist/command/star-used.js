import d from"all-the-package-repos";import f from"fast-glob";import l from"fs";import{Octokit as y}from"@octokit/core";import n from"../lib/env.js";var k=async()=>{const a=new y({auth:n.GITHUB_AUTH_TOKEN}),c=d,r=new Set,i=await f(["**/package.json","!**/node_modules"],{absolute:!0,cwd:n.BASE_DIR}),p=async(e="")=>{if(typeof e=="string")try{await a.request(`PUT /user/starred/${e.replace("https://github.com/","")}`),console.log(`Starred repository: ${e.replace("https://github.com/","")}`)}catch{console.log(`Could not star repository: ${e.replace("https://github.com/","")}`)}};for(const e of i){const t=JSON.parse((await l.promises.readFile(e)).toString());for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&(o=="dependencies"||o=="devDependencies"))for(const s in t[o])Object.prototype.hasOwnProperty.call(t[o],s)&&r.add(s)}for(const e of r)p(c[e])};export{k as default};
